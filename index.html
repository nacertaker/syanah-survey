<!DOCTYPE html>
<html lang="ar" dir="rtl" id="html-tag">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Syanah.com Survey</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #FFD700;
            --secondary-color: #333333;
            --bg-color: #F8F9FA;
            --card-bg: #ffffff;
            --text-color: #333;
            --border-color: #e0e0e0;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            background: var(--card-bg);
            width: 100%;
            max-width: 500px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            overflow: hidden;
        }

        /* Ø´Ø±ÙŠØ· Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ© */
        .lang-switcher {
            display: flex;
            justify-content: flex-end;
            padding: 10px 20px;
            background: #eee;
            gap: 10px;
        }

        .lang-btn {
            background: none;
            border: 1px solid #ccc;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            font-family: 'Tajawal', sans-serif;
        }

        .lang-btn.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
            font-weight: bold;
        }

        .header {
            background-color: var(--primary-color);
            padding: 25px 20px;
            text-align: center;
        }

        .logo-container {
            background-color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 10px;
        }

        .logo-container img { width: 35px; }

        .form-content { padding: 30px 25px; text-align: inherit; }
        
        .radio-group { display: flex; flex-direction: column; gap: 12px; margin-top: 15px; }
        
        .radio-option { display: flex; align-items: center; font-size: 14px; cursor: pointer; }
        
        /* Ø¶Ø¨Ø· Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ù„Ù„Ø±Ø§Ø¯ÙŠÙˆ Ø­Ø³Ø¨ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ */
        [dir="rtl"] .radio-option input { margin-left: 10px; }
        [dir="ltr"] .radio-option input { margin-right: 10px; }

        input[type="text"], textarea {
            width: 100%; padding: 12px; border: 1px solid var(--border-color);
            border-radius: 8px; margin-top: 8px; box-sizing: border-box; font-family: 'Tajawal', sans-serif;
        }

        .submit-btn {
            background-color: var(--primary-color);
            width: 100%; padding: 15px; border: none; border-radius: 8px;
            font-weight: bold; cursor: pointer; margin-top: 20px; font-family: 'Tajawal', sans-serif;
        }

        #success-card { display: none; padding: 40px 20px; text-align: center; background: #fffde7; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <div class="lang-switcher">
        <button class="lang-btn active" onclick="setLanguage('ar')">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
        <button class="lang-btn" onclick="setLanguage('en')">English</button>
    </div>

    <div class="header">
        <div class="logo-container">
            <img src="https://via.placeholder.com/40" alt="Syanah Logo">
        </div>
        <h1 id="ui-title">Ø§Ø³ØªØ¨ÙŠØ§Ù† ØµÙŠØ§Ù†Ù‡.ÙƒÙˆÙ…</h1>
    </div>

    <div id="survey-form" class="form-content">
        <h2 id="ui-welcome" style="text-align: center;">ÙŠÙ‡Ù…Ù†Ø§ Ø±Ø£ÙŠÙƒ Ù„ØªØ·ÙˆÙŠØ± Ø®Ø¯Ù…ØªÙ†Ø§ ğŸ› ï¸</h2>
        <p id="ui-subtitle" style="text-align: center; color: #666;">Ù†Ø£Ø³Ù Ù„Ù…ØºØ§Ø¯Ø±ØªÙƒØŒ Ø±Ø£ÙŠÙƒ Ø§Ù„ØµØ§Ø¯Ù‚ ÙŠØ³Ø§Ø¹Ø¯Ù†Ø§ Ù„Ù†Ø¹ÙˆØ¯ Ø£ÙØ¶Ù„.</p>

        <form id="uninstall-survey">
            <label id="ui-q1-label" class="form-label"><b>Ù…Ø§ Ù‡Ùˆ Ø³Ø¨Ø¨ Ø­Ø°ÙÙƒ Ù„ØªØ·Ø¨ÙŠÙ‚ ØµÙŠØ§Ù†Ù‡.ÙƒÙˆÙ…ØŸ</b></label>
            <div class="radio-group" id="reasons-container">
                </div>

            <div id="better-app-field" class="hidden">
                <label id="ui-better-app-label" class="form-label">ÙŠØ±Ø¬Ù‰ Ø°ÙƒØ± Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙˆÙ…Ø§ Ø§Ù„Ø°ÙŠ Ù…ÙŠØ²Ù‡ Ø¹Ù†Ø§ØŸ</label>
                <input type="text" id="app-name">
            </div>

            <div id="missing-service-field" class="hidden">
                <label id="ui-missing-service-label" class="form-label">Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„ØªÙŠ ÙƒÙ†Øª ØªØ¨Ø­Ø« Ø¹Ù†Ù‡Ø§ØŸ</label>
                <input type="text" id="service-name">
            </div>

            <div style="margin-top: 20px;">
                <label id="ui-notes-label" class="form-label">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                <textarea id="notes" rows="3"></textarea>
            </div>

            <button type="submit" id="ui-submit-btn" class="submit-btn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</button>
        </form>
    </div>

    <div id="success-card">
        <h2 id="ui-success-title">Ø´ÙƒØ±Ø§Ù‹ Ù„ØµØ±Ø§Ø­ØªÙƒ!</h2>
        <p id="ui-success-msg"></p>
    </div>
</div>

<script>
    const translations = {
        ar: {
            title: "Ø§Ø³ØªØ¨ÙŠØ§Ù† ØµÙŠØ§Ù†Ù‡.ÙƒÙˆÙ…",
            welcome: "ÙŠÙ‡Ù…Ù†Ø§ Ø±Ø£ÙŠÙƒ Ù„ØªØ·ÙˆÙŠØ± Ø®Ø¯Ù…ØªÙ†Ø§ ğŸ› ï¸",
            subtitle: "Ù†Ø£Ø³Ù Ù„Ù…ØºØ§Ø¯Ø±ØªÙƒØŒ Ø±Ø£ÙŠÙƒ Ø§Ù„ØµØ§Ø¯Ù‚ ÙŠØ³Ø§Ø¹Ø¯Ù†Ø§ Ù„Ù†Ø¹ÙˆØ¯ Ø£ÙØ¶Ù„.",
            q1_label: "Ù…Ø§ Ù‡Ùˆ Ø³Ø¨Ø¨ Ø­Ø°ÙÙƒ Ù„ØªØ·Ø¨ÙŠÙ‚ ØµÙŠØ§Ù†Ù‡.ÙƒÙˆÙ…ØŸ",
            reasons: [
                {id: "difficult", text: "ØªØ·Ø¨ÙŠÙ‚ ØµØ¹Ø¨ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…"},
                {id: "price", text: "Ù„Ø³Øª Ø±Ø§Ø¶Ù Ø¹Ù† Ø§Ù„Ø£Ø³Ø¹Ø§Ø±"},
                {id: "quality", text: "Ù„Ø³Øª Ø±Ø§Ø¶Ù Ø¹Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ø®Ø¯Ù…Ø©"},
                {id: "not_needed", text: "Ù„Ù… Ø£Ø¹Ø¯ Ø¨Ø­Ø§Ø¬Ø© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚"},
                {id: "better_app", text: "ÙˆØ¬Ø¯Øª ØªØ·Ø¨ÙŠÙ‚Ø§Ù‹ Ø£ÙØ¶Ù„"},
                {id: "customer_service", text: "Ù„Ø³Øª Ø±Ø§Ø¶Ù Ø¹Ù† Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"},
                {id: "missing_service", text: "Ù„Ù… Ø£Ø¬Ø¯ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„ØªÙŠ Ø£Ø­ØªØ§Ø¬Ù‡Ø§"}
            ],
            better_app_label: "ÙŠØ±Ø¬Ù‰ Ø°ÙƒØ± Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙˆÙ…Ø§ Ø§Ù„Ø°ÙŠ Ù…ÙŠØ²Ù‡ Ø¹Ù†Ø§ØŸ",
            missing_service_label: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„ØªÙŠ ÙƒÙ†Øª ØªØ¨Ø­Ø« Ø¹Ù†Ù‡Ø§ØŸ",
            notes_label: "Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",
            submit_btn: "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…",
            submitting: "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...",
            success_title: "Ø´ÙƒØ±Ø§Ù‹ Ù„ØµØ±Ø§Ø­ØªÙƒ!",
            success_msg: "ØªÙ‚Ø¯ÙŠØ±Ø§Ù‹ Ù„ÙˆÙ‚ØªÙƒØŒ ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ… Back10 (Ø®ØµÙ… 10%) ØµØ§Ù„Ø­ Ù„Ù€ 3 Ø£Ø´Ù‡Ø±. Ù†ØªÙ…Ù†Ù‰ Ø±Ø¤ÙŠØªÙƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹!"
        },
        en: {
            title: "Syanah.com Survey",
            welcome: "Your feedback matters ğŸ› ï¸",
            subtitle: "We are sorry to see you go. Your honest feedback helps us improve.",
            q1_label: "Why did you uninstall Syanah.com?",
            reasons: [
                {id: "difficult", text: "App is difficult to use"},
                {id: "price", text: "Not satisfied with prices"},
                {id: "quality", text: "Not satisfied with service quality"},
                {id: "not_needed", text: "I no longer need the app"},
                {id: "better_app", text: "Found a better app"},
                {id: "customer_service", text: "Not satisfied with customer service"},
                {id: "missing_service", text: "Didn't find the service I needed"}
            ],
            better_app_label: "Please mention the app name and what's better about it?",
            missing_service_label: "What service were you looking for?",
            notes_label: "Additional notes (Optional)",
            submit_btn: "Submit Feedback",
            submitting: "Sending...",
            success_title: "Thank you!",
            success_msg: "As a token of appreciation, use code Back10 for 10% off your next order (valid for 3 months). See you soon!"
        }
    };

    let currentLang = 'ar';

    function setLanguage(lang) {
        currentLang = lang;
        const html = document.getElementById('html-tag');
        html.dir = lang === 'ar' ? 'rtl' : 'ltr';
        html.lang = lang;

        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø±
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.classList.toggle('active', btn.innerText.toLowerCase().includes(lang === 'en' ? 'eng' : 'Ø¹Ø±Ø¨'));
        });

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙˆØµ
        const t = translations[lang];
        document.getElementById('ui-title').innerText = t.title;
        document.getElementById('ui-welcome').innerText = t.welcome;
        document.getElementById('ui-subtitle').innerText = t.subtitle;
        document.getElementById('ui-q1-label').innerText = t.q1_label;
        document.getElementById('ui-better-app-label').innerText = t.better_app_label;
        document.getElementById('ui-missing-service-label').innerText = t.missing_service_label;
        document.getElementById('ui-notes-label').innerText = t.notes_label;
        document.getElementById('ui-submit-btn').innerText = t.submit_btn;
        document.getElementById('ui-success-title').innerText = t.success_title;
        document.getElementById('ui-success-msg').innerText = t.success_msg;

        // ØªØ­Ø¯ÙŠØ« Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ
        const container = document.getElementById('reasons-container');
        container.innerHTML = '';
        t.reasons.forEach(reason => {
            container.innerHTML += `
                <label class="radio-option">
                    <input type="radio" name="reason" value="${reason.id}" required onchange="checkReason()">
                    ${reason.text}
                </label>
            `;
        });
    }

    function checkReason() {
        const selected = document.querySelector('input[name="reason"]:checked').value;
        document.getElementById('better-app-field').className = (selected === 'better_app') ? '' : 'hidden';
        document.getElementById('missing-service-field').className = (selected === 'missing_service') ? '' : 'hidden';
    }

    document.getElementById('uninstall-survey').addEventListener('submit', function(e) {
        e.preventDefault();
        const GOOGLE_SCRIPT_URL = 'Ø±Ø§Ø¨Ø·_ØªØ·Ø¨ÙŠÙ‚_Ø§Ù„ÙˆÙŠØ¨_Ø§Ù„Ø®Ø§Øµ_Ø¨Ùƒ_Ù…Ù†_Ø¬ÙˆØ¬Ù„';
        
        const submitBtn = document.getElementById('ui-submit-btn');
        submitBtn.innerText = translations[currentLang].submitting;
        submitBtn.disabled = true;

        const formData = {
            language: currentLang, // Ù†Ø±Ø³Ù„ Ø§Ù„Ù„ØºØ© Ø£ÙŠØ¶Ø§Ù‹ Ù„Ø¬ÙˆØ¬Ù„ Ø´ÙŠØª
            reason: document.querySelector('input[name="reason"]:checked').value,
            betterAppDetails: document.getElementById('app-name').value || 'N/A',
            missingServiceDetails: document.getElementById('service-name').value || 'N/A',
            notes: document.getElementById('notes').value || 'N/A'
        };

        fetch(GOOGLE_SCRIPT_URL, {
            method: 'POST',
            mode: 'no-cors',
            body: JSON.stringify(formData)
        }).then(() => {
            document.getElementById('survey-form').style.display = 'none';
            document.getElementById('header').style.display = 'none'; // Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‡ÙŠØ¯Ø±
            document.getElementById('success-card').style.display = 'block';
        });
    });

    // Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„
    setLanguage('ar');
</script>

</body>
</html>
